# # airflow_projects
В приложении с которым ведется работа есть два продукта: лента новостей (feed_actions) и мессенджер (message_actions). При помощи airflow были автоматизированы некоторые прцессы анализа данных:

1. Daily_import_to_clickhouse: Ежедневно из соответствующих баз выгружаются данные за вчерашний день, подсчитываются метрики:число просмотров и лайков в ленте новостей для каждого пользователя,число полученных и отправленных сообщений,число получателей писем от пользователя, число отправителей писем пользователю. Все метрики считаются в разрезах по полу, возрасту, операционной системе. Затем полученные данные загружаются в отдельную таблицу в ClickHouse.

2. Daily_report: Из таблицы в ClickHouse выгружаются данные об основных метриках новостной ленты(DAU, лайки, просмотры, CTR), формируется текстовый отчет за вчерашний день и графики за последнюю неделю, данные отправляются в телеграмм чат заинтересованным работникам.

3. App_work_report: Работает подобно предыдущему проекту, но собирает отчет по работе всего приложения, проводится сравнение со средними показателями.

4. Alert_system: система поиска аномалий в работе приложения по метрикам: DAU ленты новостей и мессенджера, лайки, просмотры, CTR, число отправленных сообщений. Алгоритм поиска аномалий построен на основе межквартильного размаха. Каждые 15 минут происходит поиск аномалий в работе приложения, в случае их обнаружения об этом отправляется сообщение с графиком и ссылкой на дашборд в телеграмм чат ответственным работникам.
